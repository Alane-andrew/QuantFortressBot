<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="1400"
   height="750"
   viewBox="0 0 1400 750"
   version="1.1"
   id="svg35"
   sodipodi:docname="architecture_dark.svg"
   inkscape:version="1.4.2 (ebf0e940, 2025-05-08)"
   inkscape:export-filename="architecture_dark_v4_11.png"
   inkscape:export-xdpi="192"
   inkscape:export-ydpi="192"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview35"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     inkscape:zoom="0.62071429"
     inkscape:cx="592.86536"
     inkscape:cy="411.62255"
     inkscape:window-width="1440"
     inkscape:window-height="792"
     inkscape:window-x="0"
     inkscape:window-y="25"
     inkscape:window-maximized="1"
     inkscape:current-layer="svg35" />
  <defs
     id="defs1">
    <style
       id="style1">
      .title { font: 700 28px Arial, Helvetica, sans-serif; fill: #E5E7EB; }
      .subtitle { font: 600 16px Arial, Helvetica, sans-serif; fill: #94A3B8; }
      .label { font: 700 18px Arial, Helvetica, sans-serif; fill: #F8FAFC; }
      .small { font: 400 14px Arial, Helvetica, sans-serif; fill: #CBD5E1; }
      .edge { font: 600 12px Arial, Helvetica, sans-serif; fill: #E5E7EB; }
      .box { fill: #111827; stroke: #334155; stroke-width: 2; rx: 12; }
      .boxMuted { fill: #0B1220; stroke: #334155; stroke-width: 2; rx: 12; }
      .boxAccent { fill: #0EC6A5; fill-opacity: 0.10; stroke: #0EC6A5; stroke-width: 2; rx: 12; }
      .blackbox { fill: #FFFFFF; fill-opacity: 0.08; stroke: #94A3B8; stroke-dasharray: 8 6; stroke-width: 2; rx: 12; }
      .arrow { stroke: #A5B4FC; stroke-width: 3; marker-end: url(#arrowHead); fill: none; stroke-linecap: round; stroke-linejoin: round; }
      .arrowDashed { stroke: #60A5FA; stroke-width: 2.8; marker-end: url(#arrowHead); fill: none; stroke-dasharray: 10 7; stroke-linecap: round; }
    </style>
    <marker
       id="arrowHead"
       viewBox="0 0 10 10"
       refX="8"
       refY="5"
       markerWidth="8"
       markerHeight="8"
       orient="auto-start-reverse">
      <path
         d="M 0,0 10,5 0,10 Z"
         fill="#a5b4fc"
         id="path1" />
    </marker>
  </defs>
  <rect
     width="100%"
     height="100.00002%"
     fill="#0f172a"
     id="rect1"
     x="0"
     y="0"
     style="stroke-width:0.999998" />
  <!-- Header -->
  <text
     x="40"
     y="60"
     class="title"
     id="text1"
     style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:28px;line-height:normal;font-family:Arial, Helvetica, sans-serif">QuantFortressBot — Architecture (Go)</text>
  <text
     x="40"
     y="90"
     class="subtitle"
     id="text2"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:16px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Grid Strategy + Risk Closed Loop · Interfaces Public · BHLS Implementation Private (NDA)</text>
  <!-- Left column -->
  <g
     id="orc"
     transform="translate(60,156)">
    <rect
       class="box"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect2" />
    <text
       class="label"
       x="24"
       y="40"
       id="text3"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Orchestrator</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text4"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Event loop · Wiring strategy, risk actions, adapter</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text5"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Handles Halt/Resume · Dispatch Open/Close Hedge</text>
  </g>
  <g
     id="strat"
     transform="translate(60,326)">
    <rect
       class="box"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect5" />
    <text
       class="label"
       x="24"
       y="40"
       id="text6"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Strategy (Grid / Long·Short)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text7"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Maintains price bands · Issues entries/exits</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text8"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Suspends when hedging is active</text>
  </g>
  <!-- Middle column -->
  <g
     id="risk"
     transform="translate(520,156)">
    <rect
       class="boxAccent"
       x="0.072840676"
       y="-27.965975"
       width="419.85434"
       height="227.89313"
       id="rect8" />
    <text
       class="label"
       x="24"
       y="10"
       id="text9"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Risk Engine (Interfaces Open)</text>
    <text
       class="small"
       x="24"
       y="40"
       id="text10"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• CheckAndManageRisk(price) → actions[]</text>
    <g
       id="g135"
       transform="translate(0,6)">
      <text
         class="small"
         x="24"
         y="63"
         id="text11"
         style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Actions: HaltGrid · ResumeGrid · OpenHedge · CloseHedge</text>
      <text
         class="small"
         x="84.254883"
         y="87.199219"
         id="text11-7"
         style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#cbd5e1">· LiquidateAndStop</text>
    </g>
    <text
       class="small"
       x="24"
       y="120"
       id="text12"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Tracks active hedges · cumulative PnL · breaker flags</text>
    <rect
       class="blackbox"
       x="20"
       y="135"
       width="380"
       height="50"
       id="rect12" />
    <text
       class="small"
       x="32"
       y="165"
       id="text13"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">BHLS: Layered Hedging + Progressive Stop-Loss (Private · NDA)</text>
  </g>
  <g
     id="ex"
     transform="translate(520,396)">
    <rect
       class="box"
       x="0"
       y="0"
       width="420"
       height="150"
       id="rect13" />
    <text
       class="label"
       x="24"
       y="40"
       id="text14"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Exchange Adapter (Binance Futures)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text15"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Orders · Positions · Mark/Last Price</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text16"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Precision / Filters compliance (PERCENT_PRICE, qty)</text>
  </g>
  <!-- Right column -->
  <g
     id="state"
     transform="translate(1000,156)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="320"
       height="150"
       id="rect16" />
    <text
       class="label"
       x="24"
       y="40"
       id="text17"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">State Persistence</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text18"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Active hedges · PnL · flags</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text19"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Restore on restart</text>
  </g>
  <g
     id="mon"
     transform="translate(1000,336)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="320"
       height="210"
       id="rect19" />
    <text
       class="label"
       x="24"
       y="40"
       id="text20"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Monitoring / Logs</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text21"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Health ticks · risk events</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text22"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Hedge lifecycle and PnL sync</text>
    <text
       class="small"
       x="24"
       y="120"
       id="text23"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Breaker notifications</text>
  </g>
  <g
     id="profit"
     transform="translate(60,496)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect23" />
    <text
       class="label"
       x="24"
       y="40"
       id="text24"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Profit / TTP (Future module)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text25"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Trailing take-profit hooks (placeholder)</text>
  </g>
  <g
     id="cfg"
     transform="translate(520,576)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="420"
       height="100"
       id="rect25" />
    <text
       class="label"
       x="24"
       y="40"
       id="text26"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Config</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text27"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• YAML with placeholders · secrets via .env</text>
  </g>
  <!-- ======= Curved, spaced arrows + labels (v4, more margin) ======= -->
  <!-- Orchestrator -> Risk (straight, label above) -->
  <path
     class="arrow"
     d="m 438.8105,204.95302 c 34.10588,0 53.59496,0 80.87966,2.0168"
     id="path27" />
  <text
     class="edge"
     x="442.88889"
     y="234.44444"
     id="text28"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">exposure · price</text>
  <!-- Strategy -> Risk (curved, label centered away) -->
  <path
     class="arrow"
     d="m 436.66667,399.54167 c 25,-30 50,-70 83,-115"
     id="path28" />
  <text
     class="edge"
     x="384.66666"
     y="359.54166"
     id="text29"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">breach signal</text>
  <!-- Orchestrator -> Exchange (curve down-right, label low) -->
  <path
     class="arrow"
     d="m 419.85556,281.10144 c 50.86447,56.48089 90.42573,86.89367 135.63859,117.30646"
     id="path29" />
  <text
     class="edge"
     x="483.33334"
     y="385.375"
     id="text30"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">orders</text>
  <!-- Risk -> Orchestrator (return dashed, routed high) -->
  <path
     class="arrowDashed"
     d="M 520,176 C 495,151 470,151 438,166"
     id="path30" />
  <text
     class="edge"
     x="450"
     y="148"
     id="text31"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">halt/resume</text>
  <!-- Exchange -> State (wide curve, label mid) -->
  <path
     class="arrow"
     d="m 939.67247,448.41409 c 25.24241,-33.92997 40.38786,-93.30743 60.58183,-207.8211"
     id="path31" />
  <text
     class="edge"
     x="919.16669"
     y="383.70834"
     id="text32"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">positions · PnL</text>
  <!-- Exchange -> Monitor (short curve, label stays right) -->
  <path
     class="arrow"
     d="m 940,486 c 30,-5 45,-15 60,-30"
     id="path32" />
  <text
     class="edge"
     x="952.20831"
     y="499"
     id="text33"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">events</text>
  <!-- Risk -> State (short gentle curve high, avoid overlap) -->
  <path
     class="arrow"
     d="m 940,198 c 20,-12 40,-5 60,8"
     id="path33" />
  <text
     class="edge"
     x="954"
     y="184"
     id="text34"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">flags</text>
  <!-- Strategy -> Config (TTP hook, low right) -->
  <path
     class="arrow"
     d="m 440.39289,528.9686 c 29.71944,33.78682 54.48564,67.57365 81.23313,101.36047"
     id="path34" />
  <text
     class="edge"
     x="442.16666"
     y="604.45831"
     id="text35"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#94a3b8;fill-opacity:1">ttp hook</text>
</svg>
