<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   width="1430"
   height="750"
   viewBox="0 0 1430 750"
   version="1.1"
   id="svg35"
   sodipodi:docname="architecture_light.svg"
   inkscape:version="1.4.2 (ebf0e940, 2025-05-08)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview35"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     inkscape:zoom="0.78"
     inkscape:cx="697.4359"
     inkscape:cy="382.69231"
     inkscape:window-width="1440"
     inkscape:window-height="794"
     inkscape:window-x="0"
     inkscape:window-y="25"
     inkscape:window-maximized="1"
     inkscape:current-layer="profit" />
  <defs
     id="defs1">
    <style
       id="style1">
      .title { font: 700 28px Arial, Helvetica, sans-serif; fill: #0F172A; }
      .subtitle { font: 600 16px Arial, Helvetica, sans-serif; fill: #334155; }
      .label { font: 700 18px Arial, Helvetica, sans-serif; fill: #0F172A; }
      .small { font: 400 14px Arial, Helvetica, sans-serif; fill: #334155; }
      .edge { font: 600 12px Arial, Helvetica, sans-serif; fill: #475569; }
      .box { fill: #FFFFFF; stroke: #0B65C2; stroke-width: 2; rx: 12; }
      .boxMuted { fill: #F8FAFC; stroke: #94A3B8; stroke-width: 2; rx: 12; }
      .boxAccent { fill: #0EC6A5; fill-opacity: 0.06; stroke: #0EC6A5; stroke-width: 2; rx: 12; }
      .blackbox { fill: #0F172A; fill-opacity: 0.08; stroke: #0F172A; stroke-dasharray: 8 6; stroke-width: 2; rx: 12; }
      .arrow { stroke: #0F172A; stroke-width: 3; marker-end: url(#arrowHead); fill: none; stroke-linecap: round; stroke-linejoin: round; }
      .arrowDashed { stroke: #334155; stroke-width: 2.8; marker-end: url(#arrowHead); fill: none; stroke-dasharray: 10 7; stroke-linecap: round; }
    </style>
    <marker
       id="arrowHead"
       viewBox="0 0 10 10"
       refX="8"
       refY="5"
       markerWidth="8"
       markerHeight="8"
       orient="auto-start-reverse">
      <path
         d="M 0,0 10,5 0,10 Z"
         fill="#0f172a"
         id="path1" />
    </marker>
  </defs>
  <rect
     width="100%"
     height="100.14536%"
     fill="#ffffff"
     id="rect1"
     x="0"
     y="0"
     style="stroke-width:1.00073"
     sodipodi:insensitive="true" />
  <!-- Header -->
  <text
     x="40"
     y="60"
     class="title"
     id="text1"
     style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:28px;line-height:normal;font-family:Arial, Helvetica, sans-serif">QuantFortressBot — Architecture (Go)</text>
  <text
     x="40"
     y="90"
     class="subtitle"
     id="text2"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:16px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Grid Strategy + Risk Closed Loop · Interfaces Public · BHLS Implementation Private (NDA)</text>
  <!-- Left column -->
  <g
     id="orc"
     transform="translate(60,164)">
    <rect
       class="box"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect2" />
    <text
       class="label"
       x="24"
       y="40"
       id="text3"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Orchestrator</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text4"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Event loop · Wiring strategy, risk actions, adapter</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text5"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Handles Halt/Resume · Dispatch Open/Close Hedge</text>
  </g>
  <g
     id="strat"
     transform="translate(60,334)">
    <rect
       class="box"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect5" />
    <text
       class="label"
       x="24"
       y="40"
       id="text6"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Strategy (Grid / Long·Short)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text7"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Maintains price bands · Issues entries/exits</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text8"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Suspends when hedging is active</text>
  </g>
  <!-- Middle column -->
  <g
     id="risk"
     transform="translate(520,198)">
    <rect
       class="boxAccent"
       x="0.080131538"
       y="-48.166691"
       width="457.84393"
       height="214.08655"
       id="rect8" />
    <text
       class="label"
       x="24"
       y="-12"
       id="text9"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Risk Engine (Interfaces Open)</text>
    <text
       class="small"
       x="24"
       y="12"
       id="text10"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• CheckAndManageRisk(price) → actions[]</text>
    <text
       class="small"
       x="24"
       y="37"
       id="text11"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Actions: HaltGrid · ResumeGrid · OpenHedge · CloseHedge</text>
    <text
       class="small"
       x="84.944534"
       y="60.716461"
       id="text11-0"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#334155">· LiquidateAndStop</text>
    <text
       class="small"
       x="24"
       y="86"
       id="text12"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Tracks active hedges · cumulative PnL · breaker flags</text>
    <rect
       class="blackbox"
       x="14.43602"
       y="101.06102"
       width="428.8363"
       height="49.87796"
       id="rect12" />
    <text
       class="small"
       x="28"
       y="131"
       id="text13"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif"><tspan
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Arial, Helvetica, sans-serif;-inkscape-font-specification:'Arial, Helvetica, sans-serif Bold'"
         id="tspan1">BHLS: Batch Hedging and Layered Stop-loss (Private · NDA)</tspan></text>
    <text
       class="small"
       x="-478.31665"
       y="-84.535774"
       id="text13-8"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif;fill:#999999"><tspan
         style="font-style:normal;font-variant:normal;font-weight:bold;font-stretch:normal;font-family:Arial, Helvetica, sans-serif;-inkscape-font-specification:'Arial, Helvetica, sans-serif Bold';fill:#999999"
         id="tspan1-9">Remarks:   BHLS = Batch Hedging + Layered Stop-loss</tspan></text>
  </g>
  <g
     id="ex"
     transform="matrix(1.0902667,0,0,0.99968576,520.04399,404.04399)">
    <rect
       class="box"
       x="0"
       y="0"
       width="420"
       height="150"
       id="rect13" />
    <text
       class="label"
       x="24"
       y="40"
       id="text14"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Exchange Adapter (Binance Futures)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text15"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Orders · Positions · Mark/Last Price</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text16"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Precision / Filters compliance (PERCENT_PRICE, qty)</text>
  </g>
  <!-- Right column -->
  <g
     id="state"
     transform="translate(1054,164)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="320"
       height="150"
       id="rect16" />
    <text
       class="label"
       x="24"
       y="40"
       id="text17"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">State Persistence</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text18"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Active hedges · PnL · flags</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text19"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Restore on restart</text>
  </g>
  <g
     id="mon"
     transform="translate(1054,344)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="320"
       height="210"
       id="rect19" />
    <text
       class="label"
       x="24"
       y="40"
       id="text20"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Monitoring / Logs</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text21"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Health ticks · risk events</text>
    <text
       class="small"
       x="24"
       y="95"
       id="text22"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Hedge lifecycle and PnL sync</text>
    <text
       class="small"
       x="24"
       y="120"
       id="text23"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Breaker notifications</text>
  </g>
  <g
     id="profit"
     transform="translate(60,504)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="380"
       height="120"
       id="rect23" />
    <text
       class="label"
       x="24"
       y="40"
       id="text24"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Profit / TTP (Future module)</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text25"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• Trailing Take-Profit hooks (placeholder)</text>
  </g>
  <g
     id="cfg"
     transform="matrix(1.0902667,0,0,0.99968576,520.04399,583.98743)">
    <rect
       class="boxMuted"
       x="0"
       y="0"
       width="420"
       height="100"
       id="rect25" />
    <text
       class="label"
       x="24"
       y="40"
       id="text26"
       style="font-style:normal;font-variant:normal;font-weight:700;font-stretch:normal;font-size:18px;line-height:normal;font-family:Arial, Helvetica, sans-serif">Config</text>
    <text
       class="small"
       x="24"
       y="70"
       id="text27"
       style="font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:14px;line-height:normal;font-family:Arial, Helvetica, sans-serif">• YAML with placeholders · secrets via .env</text>
  </g>
  <!-- ======= Curved, spaced arrows + labels (v4, more margin) ======= -->
  <!-- Orchestrator -> Risk (straight, label above) -->
  <path
     class="arrow"
     d="m 443.10753,211.91487 c 32.33918,0 50.81871,0 76.69005,2.05114"
     id="path27" />
  <text
     class="edge"
     x="422.68967"
     y="236.55173"
     id="text28"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">exposure · price</text>
  <!-- Strategy -> Risk (curved, label centered away) -->
  <path
     class="arrow"
     d="m 436.11074,398.69132 c 27.61239,-31.16427 55.22478,-72.71664 91.67313,-119.46305"
     id="path28" />
  <text
     class="edge"
     x="385.93103"
     y="361.58621"
     id="text29"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">breach signal</text>
  <!-- Orchestrator -> Exchange (curve down-right, label low) -->
  <path
     class="arrow"
     d="m 419.90258,289.12349 c 51.17133,58.65013 90.97125,90.23098 136.45687,121.81182"
     id="path29" />
  <text
     class="edge"
     x="480.51724"
     y="395.89655"
     id="text30"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">orders</text>
  <!-- Risk -> Orchestrator (return dashed, routed high) -->
  <path
     class="arrowDashed"
     d="M 520,184 C 495,159 470,159 438,174"
     id="path30" />
  <text
     class="edge"
     x="450"
     y="156"
     id="text31"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">halt/resume</text>
  <!-- Exchange -> State (wide curve, label mid) -->
  <path
     class="arrow"
     d="m 980.16615,446.88533 c 30.78845,-33.83905 49.26155,-93.05738 73.89235,-207.26416"
     id="path31" />
  <text
     class="edge"
     x="953.13934"
     y="386.38507"
     id="text32"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">positions · PnL</text>
  <!-- Exchange -> Monitor (short curve, label stays right) -->
  <path
     class="arrow"
     d="m 980.65207,497.90154 c 37.04233,-4.91687 55.56343,-14.75062 74.08453,-29.50123"
     id="path32" />
  <text
     class="edge"
     x="995.76434"
     y="509.96692"
     id="text33"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">events</text>
  <!-- Risk -> State (short gentle curve high, avoid overlap) -->
  <path
     class="arrow"
     d="m 978.29414,182.99527 c 23.44776,-11.57835 46.89556,-4.82431 70.34346,7.7189"
     id="path33" />
  <text
     class="edge"
     x="989.33331"
     y="165.04167"
     id="text34"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">flags</text>
  <!-- Strategy -> Config (TTP hook, low right) -->
  <path
     class="arrow"
     d="m 439.55582,543.34199 c 30.08323,31.75288 55.15257,63.50577 82.22747,95.25866"
     id="path34" />
  <text
     class="edge"
     x="445.72412"
     y="614.20691"
     id="text35"
     style="font-style:normal;font-variant:normal;font-weight:600;font-stretch:normal;font-size:12px;line-height:normal;font-family:Arial, Helvetica, sans-serif">ttp hook</text>
</svg>
